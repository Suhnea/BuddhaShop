# Отдельные списки товаров по категориям (без дублирования)
incense_products = [
    "Благовония: Лотос",
    "Благовония: Пачули",
    "Благовония: Жасмин",
    "Благовония: Ладан",
    "Благовония: Лаванда",
    "Благовония: Эвкалипт",
    "Благовония: Полынь",
    "Благовония: Ваниль",
    "Благовония: Цитрус",
    "Благовония: Мирра",
    "Благовония: Мята",
    "Благовония: Розмарин",
    "Благовония: Сандал"
]

book_products = [
    "Книги: Искусство быть счастливым",
    "Книги: Сила настоящего",
    "Книги: Сердце буддизма",
    "Книги: Защитные практики в буддизме",
    "Книги: Радость жизни",
    "Книги: Энергия мудрости",
    "Книги: Основы буддизма",
    "Книги: Маленькая книга жизни",
    "Книги: Пробуждение",
    "Книги: Тибетская книга мертвых"
]

statue_products = [
    "Статуэтки: Будда в медитации",
    "Статуэтки: Будда с чашей",
    "Статуэтки: Манжушри",
    "Статуэтки: Зелёный Тары",
    "Статуэтки: Будда с защитным жестом",
    "Статуэтки: Будда с поднятой рукой",
    "Статуэтки: Будда с книгой",
    "Статуэтки: Бодхисаттва Авалокитешвара",
    "Статуэтки: Будда с ваджрой",
    "Статуэтки: Будда в позе отдыха"
]

mantra_products = [
    "Мантры: Ом Мани Падме Хум",
    "Мантры: Ом Ах Хум",
    "Мантры: Ом А Ра Па Ца На Дхи",
    "Мантры: Ом Намо Бхагавате Рудрайя",
    "Мантры: Ом Шанти Шанти Шанти",
    "Мантры: Ом Ваджрапани Хум",
    "Мантры: Ом Гам Ганапатайе Намаха",
    "Мантры: Ом Тара Тутаре Туре Соха"
]

# Словарь рекомендаций
recommendations = {
    ("Спокойное", "Гармония"): [
        "Благовония: Лотос",
        "Книги: Искусство быть счастливым",
        "Статуэтки: Будда в медитации",
        "Мантры: Ом Мани Падме Хум"
    ],
    ("Спокойное", "Энергия"): [
        "Благовония: Пачули",
        "Книги: Сила настоящего",
        "Статуэтки: Будда с чашей",
        "Мантры: Ом Ах Хум"
    ],
    ("Спокойное", "Мудрость"): [
        "Благовония: Жасмин",
        "Книги: Сердце буддизма",
        "Статуэтки: Манжушри",
        "Мантры: Ом А Ра Па Ца На Дхи"
    ],
    ("Спокойное", "Защита"): [
        "Благовония: Ладан",
        "Книги: Защитные практики в буддизме",
        "Статуэтки: Зелёный Тары",
        "Мантры: Ом Намо Бхагавате Рудрайя"
    ],
    ("Тревожное", "Гармония"): [
        "Благовония: Лаванда",
        "Книги: Радость жизни",
        "Статуэтки: Будда с защитным жестом",
        "Мантры: Ом Шанти Шанти Шанти"
    ],
    ("Тревожное", "Энергия"): [
        "Благовония: Эвкалипт",
        "Книги: Энергия мудрости",
        "Статуэтки: Будда с поднятой рукой",
        "Мантры: Ом Ваджрапани Хум"
    ],
    ("Тревожное", "Мудрость"): [
        "Благовония: Ладан",
        "Книги: Основы буддизма",
        "Статуэтки: Будда с книгой",
        "Мантры: Ом Гам Ганапатайе Намаха"
    ],
    ("Тревожное", "Защита"): [
        "Благовония: Полынь",
        "Книги: Тибетская книга мертвых",
        "Статуэтки: Будда с ваджрой",
        "Мантры: Ом Тара Тутаре Туре Соха"
    ],
    ("Радостное", "Гармония"): [
        "Благовония: Ваниль",
        "Книги: Маленькая книга жизни",
        "Статуэтки: Бодхисаттва Авалокитешвара",
        "Мантры: Ом Мани Падме Хум"
    ],
    ("Радостное", "Энергия"): [
        "Благовония: Цитрус",
        "Книги: Сила настоящего",
        "Статуэтки: Будда с поднятой рукой",
        "Мантры: Ом Ваджрапани Хум"
    ],
    ("Радостное", "Мудрость"): [
        "Благовония: Мирра",
        "Книги: Основы буддизма",
        "Статуэтки: Будда с книгой",
        "Мантры: Ом Гам Ганапатайе Намаха"
    ],
    ("Радостное", "Защита"): [
        "Благовония: Ладан",
        "Книги: Защитные практики в буддизме",
        "Статуэтки: Будда с ваджрой",
        "Мантры: Ом Намо Бхагавате Рудрайя"
    ],
    ("Уставшее", "Гармония"): [
        "Благовония: Мята",
        "Книги: Искусство быть счастливым",
        "Статуэтки: Будда в позе отдыха",
        "Мантры: Ом Шанти Шанти Шанти"
    ],
    ("Уставшее", "Энергия"): [
        "Благовония: Розмарин",
        "Книги: Пробуждение",
        "Статуэтки: Будда с чашей",
        "Мантры: Ом Ваджрапани Хум"
    ],
    ("Уставшее", "Мудрость"): [
        "Благовония: Сандал",
        "Книги: Сердце буддизма",
        "Статуэтки: Манжушри",
        "Мантры: Ом А Ра Па Ца На Дхи"
    ],
    ("Уставшее", "Защита"): [
        "Благовония: Полынь",
        "Книги: Тибетская книга мертвых",
        "Статуэтки: Зеленый Тары",
        "Мантры: Ом Тара Тутаре Туре Соха"
    ],
}

# История запросов
search_history = []

# Функция для отображения главного меню
def main_menu():
    print("\nДобро пожаловать в буддийский магазинчик!")
    print("1. Просмотр товаров")
    print("2. Рекомендации")
    print("3. История поиска")
    print("4. Выход")
    choice = input("Выберите действие (1-4): ")
    return choice

# Функция для просмотра товаров
def browse_products():
    while True:
        # Выбор категории
        categories = {
            "1": "Благовония",
            "2": "Книги",
            "3": "Статуэтки",
            "4": "Мантры",
            "5": "Назад"
        }
        print("\nКатегории товаров:")
        for key, value in categories.items():
            print(f"{key}. {value}")
        category_choice = input("Выберите категорию (1-5): ")

        if category_choice == "5":
            break  # Возврат в главное меню

        if category_choice not in categories:
            print("Неверный выбор. Попробуйте снова.")
            continue

        # Вывод товаров выбранной категории
        if category_choice == "1":
            products = incense_products
        elif category_choice == "2":
            products = book_products
        elif category_choice == "3":
            products = statue_products
        elif category_choice == "4":
            products = mantra_products

        print(f"\nТовары в категории '{categories[category_choice]}':")
        for i, product in enumerate(products, start=1):
            print(f"{i}. {product}")

        # Выбор товара
        while True:
            product_choice = input("\nВведите номер товара для выбора или 'назад' для возврата к категориям: ")
            if product_choice.lower() == "назад":
                break  # Возврат к выбору категории

            try:
                product_index = int(product_choice) - 1
                if 0 <= product_index < len(products):
                    selected_product = products[product_index]
                    print(f"\nВы выбрали: {selected_product}")
                    # Сохраняем выбранный товар в историю
                    search_history.append(("Просмотр товара", selected_product))
                    input("\nНажмите Enter, чтобы продолжить...")
                    break
                else:
                    print("Неверный номер товара. Попробуйте снова.")
            except ValueError:
                print("Неверный ввод. Попробуйте снова.")

# Функция для рекомендаций
def get_recommendations():
    print("\nДавайте подберем товары по вашей карме!")
    mood = input("Какое у вас настроение? (Спокойное, Тревожное, Радостное, Уставшее): ").capitalize()
    goal = input("Какую цель вы преследуете? (Гармония, Энергия, Мудрость, Защита): ").capitalize()
    
    key = (mood, goal)
    if key in recommendations:
        print("\nРекомендуемые товары:")
        for product in recommendations[key]:
            print(product)
        # Сохраняем рекомендации в историю
        search_history.append(("Рекомендация", mood, goal, recommendations[key]))
    else:
        print("К сожалению, для вашего запроса нет рекомендаций.")

# Функция для отображения истории запросов
def view_search_history():
    if not search_history:
        print("\nИстория запросов пуста.")
    else:
        print("\nИстория ваших запросов:")
        for entry in search_history:
            if isinstance(entry, tuple) and len(entry) == 4:  # Рекомендации
                action, mood, goal, products = entry
                print(f"\nТип: {action}")
                print(f"Настроение: {mood}, Цель: {goal}")
                for product in products:
                    print(product)
            elif isinstance(entry, tuple) and len(entry) == 2:  # Просмотр товара
                action, product = entry
                print(f"\nТип: {action}")
                print(f"Товар: {product}")

# Основной цикл программы
while True:
    choice = main_menu()
    
    if choice == "1":
        browse_products()
    elif choice == "2":
        get_recommendations()
    elif choice == "3":
        view_search_history()
    elif choice == "4":
        print("Спасибо за посещение нашего магазинчика! До свидания!")
        break
    else:
        print("Неверный выбор. Попробуйте снова.")